<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Workflow Engine Service - version 0.7</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="overview.html"><strong aria-hidden="true">1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="installation.html"><strong aria-hidden="true">2.</strong> Installation</a></li><li class="chapter-item expanded "><a href="concepts/concepts.html"><strong aria-hidden="true">3.</strong> Concepts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="concepts/workflow/workflow.html"><strong aria-hidden="true">3.1.</strong> Workflow</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="concepts/workflow/schema.html"><strong aria-hidden="true">3.1.1.</strong> Schema details</a></li></ol></li><li class="chapter-item expanded "><a href="concepts/process/process.html"><strong aria-hidden="true">3.2.</strong> Process</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="concepts/process/schema.html"><strong aria-hidden="true">3.2.1.</strong> Schema details</a></li></ol></li><li class="chapter-item expanded "><a href="concepts/access_roles.html"><strong aria-hidden="true">3.3.</strong> Access Roles</a></li><li class="chapter-item expanded "><a href="concepts/state_event.html"><strong aria-hidden="true">3.4.</strong> State Event</a></li><li class="chapter-item expanded "><a href="concepts/state_job.html"><strong aria-hidden="true">3.5.</strong> State Job</a></li><li class="chapter-item expanded "><a href="concepts/state_action/state_action.html"><strong aria-hidden="true">3.6.</strong> State Action</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="concepts/state_action/action_response.html"><strong aria-hidden="true">3.6.1.</strong> Action Response</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="cli/cli.html"><strong aria-hidden="true">4.</strong> Command Line Tool</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="cli/new_command.html"><strong aria-hidden="true">4.1.</strong> new</a></li><li class="chapter-item expanded "><a href="cli/install_command.html"><strong aria-hidden="true">4.2.</strong> install</a></li></ol></li><li class="chapter-item expanded "><a href="configs/configs.html"><strong aria-hidden="true">5.</strong> Configure</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="configs/redis.html"><strong aria-hidden="true">5.1.</strong> redis</a></li><li class="chapter-item expanded "><a href="configs/mongo.html"><strong aria-hidden="true">5.2.</strong> mongo</a></li><li class="chapter-item expanded "><a href="configs/server.html"><strong aria-hidden="true">5.3.</strong> server</a></li><li class="chapter-item expanded "><a href="configs/admin_users.html"><strong aria-hidden="true">5.4.</strong> admin_users</a></li><li class="chapter-item expanded "><a href="configs/auth_user.html"><strong aria-hidden="true">5.5.</strong> auth_user</a></li><li class="chapter-item expanded "><a href="configs/docker.html"><strong aria-hidden="true">5.6.</strong> docker</a></li><li class="chapter-item expanded "><a href="configs/alias.html"><strong aria-hidden="true">5.7.</strong> alias</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Workflow Engine Service - version 0.7</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="overview"><a class="header" href="#overview">Overview</a></h1>
<h2 id="introduction"><a class="header" href="#introduction">Introduction</a></h2>
<p>WES (workflow engine service) is a workflow engine that can be expose some useful api endpoints for clients and servers and reduced coding for your application. More features of WES :</p>
<ol>
<li>Easy to use and easy to learn</li>
<li>common api endpoints for clients</li>
<li>microservice architecture</li>
<li>Fast and powerful</li>
<li>written on node.js, typescript</li>
<li>fields validation</li>
<li>provide interfaces in python3</li>
<li>using mongodb and docker</li>
<li>cli support</li>
</ol>
<h2 id="contributing"><a class="header" href="#contributing">Contributing</a></h2>
<p>We welcome contributions of all kinds.</p>
<p>You can contribute to this book by opening an issue or forking and sending a pull request to the main <a href="https://github.com/madkne/workflow_engine_service">Workflow-engine-service</a> repository. Knowing what people use this book for the most helps direct our attention to making those sections the best that they can be. We also want the reference to be as normative as possible, so if you see anything that is wrong, please also file an issue.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<h2 id="developer-mode"><a class="header" href="#developer-mode">developer mode</a></h2>
<p>you must install node.js 12 or later. also you need to run an instance of mongo.
for run mongo db, you can use docker:</p>
<pre><code class="language-shell">sudo docker run -p 27017:27017 --name mongo -d mongo
</code></pre>
<blockquote>
<p>you can access monogo cli with <code>docker exec -it mongo mongosh --quiet</code></p>
</blockquote>
<p>then you need to install npm dependencies of project by <code>npm i</code> on project root directory.
finally you can run dev server with <code>npm run dev</code> and you can see on <code>http://localhost:8082</code></p>
<h2 id="production-mode-"><a class="header" href="#production-mode-">production mode :</a></h2>
<p>first go to <code>cli/</code> directory and then run command <code>dat p i</code> and Done!</p>
<blockquote>
<p>for install <code>dat</code> command, see <a href="./cli/cli.html">Command Line Tool</a></p>
</blockquote>
<blockquote>
<p>you can create a <code>configs.prod.json</code> file and set your custom configs</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="concepts"><a class="header" href="#concepts">Concepts</a></h1>
<p>In this section you will learn how to:</p>
<ul>
<li>deploy workflow schema</li>
<li>create processes</li>
<li>execute actions</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="workflow"><a class="header" href="#workflow">Workflow</a></h1>
<p>a workflow just a json schema that once deployed on workflow engine and <strong>NOT CHANGED</strong> forever until reset mongo db.</p>
<p>so you can just deploy your workflow once. if you can upgrade your workflow schema, you can deploy workflow with different version</p>
<p>sample workflow schema:</p>
<pre><code class="language-json">{
    &quot;workflow_name&quot;: &quot;register_user&quot;,
    &quot;version&quot;: 1,
    &quot;create_access_roles&quot;: [
        &quot;_all_&quot;
    ],
    &quot;auto_delete_after_end&quot;: true,
    &quot;start_state&quot;: &quot;enter_info&quot;,
    &quot;end_state&quot;: &quot;finish&quot;,
    &quot;fields&quot;: [
        {
            &quot;name&quot;: &quot;firstname&quot;
        },
        {
            &quot;name&quot;: &quot;lastname&quot;,
            &quot;type&quot;: &quot;string&quot;,
            &quot;meta&quot;: {
                &quot;title&quot;: &quot;نام خانوادگی&quot;,
                &quot;help&quot;: &quot;نام خود را وارد کنید&quot;,
                &quot;class&quot;: &quot;col-sm col&quot;
            }
        },
        {
            &quot;name&quot;: &quot;phone&quot;,
            &quot;type&quot;: &quot;number&quot;
        },
        {
            &quot;name&quot;: &quot;email&quot;,
            &quot;validation&quot;: [
                {
                    &quot;builtin_check&quot;: &quot;email&quot;,
                    &quot;error&quot;: &quot;email not valid&quot;
                }
            ]
        },
        {
            &quot;name&quot;: &quot;avatar&quot;,
            &quot;type&quot;: &quot;file&quot;,
            &quot;validation&quot;: [
                {
                    &quot;builtin_check&quot;: &quot;file_type&quot;,
                    &quot;builtin_params&quot;: {
                        &quot;types&quot;: [
                            &quot;image/png&quot;,
                            &quot;image/jpg&quot;
                        ]
                    },
                    &quot;error&quot;: &quot;avatar image not valid&quot;
                },
                {
                    &quot;builtin_check&quot;: &quot;file_size&quot;,
                    &quot;builtin_params&quot;: {
                        &quot;max&quot;: 10000
                    },
                    &quot;error&quot;: &quot;avatar image size not valid&quot;
                }
            ]
        }
    ],
    &quot;states&quot;: [
        {
            &quot;name&quot;: &quot;enter_info&quot;,
            &quot;meta&quot;: {
                &quot;title&quot;: &quot;ورود اطلاعات&quot;
            },
            &quot;access_roles&quot;: [
                &quot;_all_&quot;
            ],
            &quot;actions&quot;: [
                {
                    &quot;access_roles&quot;: [
                        &quot;manager&quot;
                    ],
                    &quot;required_fields&quot;: [
                        &quot;firstname&quot;,
                        &quot;lastname&quot;,
                        &quot;phone&quot;
                    ],
                    &quot;optional_fields&quot;: [
                        &quot;email&quot;
                    ],
                    &quot;name&quot;: &quot;approve&quot;,
                    &quot;type&quot;: &quot;hook_url&quot;,
                    &quot;url&quot;: &quot;http://127.0.0.1/django/api/v1/register&quot;,
                    &quot;method&quot;: &quot;post&quot;,
                    &quot;message_required&quot;: &quot;false&quot;,
                    &quot;meta&quot;: {
                        &quot;color&quot;: &quot;green&quot;,
                        &quot;title&quot;: &quot;تایید اولیه&quot;
                    }
                },
                {
                    &quot;name&quot;: &quot;reject&quot;,
                    &quot;type&quot;: &quot;redis&quot;,
                    &quot;channel&quot;: &quot;register&quot;,
                    &quot;message_required&quot;: &quot;true&quot;,
                    &quot;response_channel&quot;: &quot;resp_register&quot;,
                    &quot;set_fields&quot;: {
                        &quot;is_done&quot;: false
                    },
                    &quot;meta&quot;: {
                        &quot;color&quot;: &quot;red&quot;,
                        &quot;isCircleButton&quot;: true
                    }
                },
                {
                    &quot;name&quot;: &quot;edit&quot;,
                    &quot;type&quot;: &quot;local&quot;,
                    &quot;next_state&quot;: &quot;finish&quot;
                }
            ]
        },
        {
            &quot;name&quot;: &quot;finish&quot;
        }
    ]
}


</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="schema-details-202208141-edition"><a class="header" href="#schema-details-202208141-edition">Schema details (20220814.1 edition)</a></h1>
<h2 id="main-schema"><a class="header" href="#main-schema">main schema</a></h2>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>required</th><th>Description</th></tr></thead><tbody>
<tr><td>workflow_name</td><td>string</td><td><strong>YES</strong></td><td>name of workflow</td></tr>
<tr><td>version</td><td>number</td><td>NO</td><td>default is 1</td></tr>
<tr><td>create_access_roles</td><td>string[]</td><td>NO</td><td>user roles that access to create process from this workflow (default: <code>['_all_']</code>)</td></tr>
<tr><td>read_access_roles</td><td>string[]</td><td>NO</td><td>user roles that access to read process from this workflow (default: <code>['_all_']</code>)</td></tr>
<tr><td>process_init_check</td><td><a href="concepts/workflow/schema.html#workflowprocessoninit-schema">WorkflowProcessOnInit</a></td><td>NO</td><td>check when a process wants to start</td></tr>
<tr><td>auto_delete_after_end</td><td>boolean</td><td>NO</td><td>delete process after enter to end state</td></tr>
<tr><td>start_state</td><td>string</td><td><strong>YES</strong></td><td>start state of process</td></tr>
<tr><td>end_state</td><td>string</td><td><strong>YES</strong></td><td>end state of process</td></tr>
<tr><td>fields</td><td><a href="concepts/workflow/schema.html#workflowfield-schema">WorkflowField</a></td><td>NO</td><td>workflow fields</td></tr>
<tr><td>states</td><td><a href="concepts/workflow/schema.html#workflowstate-schema">WorkflowState</a></td><td><strong>YES</strong></td><td>workflow states</td></tr>
</tbody></table>
</div>
<h2 id="workflowprocessoninit-schema"><a class="header" href="#workflowprocessoninit-schema">WorkflowProcessOnInit schema</a></h2>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>required</th><th>Description</th></tr></thead><tbody>
<tr><td>type</td><td>string</td><td><strong>YES</strong></td><td>can be <code>local</code> or <code>api</code></td></tr>
<tr><td>local_check</td><td>string</td><td>NO</td><td>check in local mode by workflow engine. options: <code> just_one_user_running_process: every user can only create one running process</code></td></tr>
<tr><td>api_url</td><td>string</td><td>NO</td><td>api url can only response boolean or a error string like 'you can not create new process'</td></tr>
</tbody></table>
</div>
<h2 id="workflowfield-schema"><a class="header" href="#workflowfield-schema">WorkflowField schema</a></h2>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>required</th><th>Description</th></tr></thead><tbody>
<tr><td>name</td><td>string</td><td><strong>YES</strong></td><td>field name</td></tr>
<tr><td>type</td><td>string</td><td>NO</td><td>'string' or 'number' or 'boolean' or 'file' (default: string)</td></tr>
<tr><td>meta</td><td>object</td><td>NO</td><td>any data useful for client</td></tr>
<tr><td>validation</td><td>WorkflowFieldValidation[]</td><td>NO</td><td>you can set more validations on field</td></tr>
</tbody></table>
</div>
<h2 id="workflowstate-schema"><a class="header" href="#workflowstate-schema">WorkflowState schema</a></h2>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>required</th><th>Description</th></tr></thead><tbody>
<tr><td>name</td><td>string</td><td><strong>YES</strong></td><td>state name</td></tr>
<tr><td>access_role</td><td>string[]</td><td>NO</td><td>roles to view this state (default: <code>['_all_']</code>)</td></tr>
<tr><td>meta</td><td>object</td><td>NO</td><td>any data useful for client</td></tr>
<tr><td>actions</td><td><a href="concepts/workflow/schema.html#workflowstateaction-schema">WorkflowStateAction</a>[]</td><td>NO</td><td>actions of state</td></tr>
<tr><td>events</td><td><a href="concepts/workflow/schema.html#workflowstateevent-schema">WorkflowStateEvent</a>[]</td><td>NO</td><td>you can define events on state</td></tr>
<tr><td>jobs</td><td><a href="concepts/workflow/schema.html#workflowstatejob-schema">WorkflowStateJob</a>[] <sup class="footnote-reference"><a href="#state_job_note">1</a></sup></td><td>NO</td><td>you can define jobs on state</td></tr>
</tbody></table>
</div>
<h2 id="workflowstateaction-schema"><a class="header" href="#workflowstateaction-schema">WorkflowStateAction schema</a></h2>
<blockquote>
<p>for more information about state actions, continue from <a href="concepts/workflow/../state_action/state_action.html">here</a></p>
</blockquote>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>required</th><th>Description</th></tr></thead><tbody>
<tr><td>name</td><td>string</td><td><strong>YES</strong></td><td>action name</td></tr>
<tr><td>access_role</td><td>string[]</td><td>NO</td><td>roles to execute this action (default: <code>['_all_']</code>)</td></tr>
<tr><td>required_fields</td><td>string[]</td><td>NO</td><td>fields must get from client</td></tr>
<tr><td>optional_fields</td><td>string[]</td><td>NO</td><td>fields that client can send</td></tr>
<tr><td>send_fields</td><td>string[]</td><td>NO</td><td>fields that must be send to app server <sup class="footnote-reference"><a href="#send_fields_note">2</a></sup></td></tr>
<tr><td>type</td><td>string</td><td>NO</td><td>'hook_url' or 'redis' or 'local'</td></tr>
<tr><td>alias_name</td><td>string</td><td>NO</td><td>name of an alias <sup class="footnote-reference"><a href="#alias_name_note">3</a></sup></td></tr>
<tr><td>meta</td><td>object</td><td>NO</td><td>any data useful for client</td></tr>
<tr><td>message_required</td><td>boolean</td><td>NO</td><td>client must send a message or not</td></tr>
<tr><td>set_fields</td><td>object</td><td>NO</td><td>fields that can set hardcoded</td></tr>
<tr><td>base_url</td><td>string</td><td>NO</td><td>base url for relative url like <code>http://sample.com</code> <sup class="footnote-reference"><a href="#hook_base_url_note">4</a></sup></td></tr>
<tr><td>url</td><td>string</td><td>NO</td><td>can be a url like <code>http://sample.com/hook</code> or <code>/hook</code>. used for 'hook_url' type</td></tr>
<tr><td>method</td><td>string</td><td>NO</td><td>can be a request method like 'get' or 'post'. used for 'hook_url' type</td></tr>
<tr><td>headers</td><td>string[]</td><td>NO</td><td>headers that can be set on hook request. used for 'hook_url' type</td></tr>
<tr><td>channel</td><td>string</td><td>NO</td><td>publish channel name. used for 'redis' type</td></tr>
<tr><td>response_channel</td><td>string</td><td>NO</td><td>subscribe channel name. used for 'redis' type</td></tr>
<tr><td>redis_instance</td><td>string</td><td>NO</td><td>a redis instance name. used for 'redis' type. (default is first instance defined on configs)</td></tr>
<tr><td>next_state</td><td>string</td><td>NO</td><td>next state to be go. used for 'local' type</td></tr>
</tbody></table>
</div>
<h2 id="workflowstateevent-schema"><a class="header" href="#workflowstateevent-schema">WorkflowStateEvent schema</a></h2>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>required</th><th>Description</th></tr></thead><tbody>
<tr><td>name</td><td>'onInit' or 'onLeave' or 'onJob'</td><td><strong>YES</strong></td><td>event name</td></tr>
<tr><td>type</td><td>'redis' or 'hook_url'</td><td><strong>YES</strong></td><td>type of send event</td></tr>
<tr><td>alias_name</td><td>string</td><td>NO</td><td>name of an alias <sup class="footnote-reference"><a href="#alias_name_note">3</a></sup></td></tr>
<tr><td>base_url</td><td>string</td><td>NO</td><td>base url for relative url like <code>http://sample.com</code> <sup class="footnote-reference"><a href="#hook_base_url_note">4</a></sup></td></tr>
<tr><td>url</td><td>string</td><td>NO</td><td>can be a url like <code>http://sample.com/hook</code> or <code>/hook</code>. used for 'hook_url' type</td></tr>
<tr><td>method</td><td>string</td><td>NO</td><td>can be a request method like 'get' or 'post'. used for 'hook_url' type</td></tr>
<tr><td>headers</td><td>string[]</td><td>NO</td><td>headers that can be set on hook request. used for 'hook_url' type</td></tr>
<tr><td>channel</td><td>string</td><td>NO</td><td>publish channel name. used for 'redis' type</td></tr>
<tr><td>redis_instance</td><td>string</td><td>NO</td><td>a redis instance name. used for 'redis' type. (default is first instance defined on configs)</td></tr>
</tbody></table>
</div>
<h2 id="workflowstatejob-schema"><a class="header" href="#workflowstatejob-schema">WorkflowStateJob schema</a></h2>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>required</th><th>Description</th></tr></thead><tbody>
<tr><td>type</td><td>string</td><td><strong>YES</strong></td><td>job type can be &quot;static&quot; or &quot;daily&quot; or &quot;weekly&quot; or &quot;hourly&quot; or &quot;minutely&quot; or &quot;afterTime&quot;</td></tr>
<tr><td>times</td><td><a href="concepts/workflow/schema.html#workflowstatejobtime-schema">WorkflowStateJobTime</a>[]</td><td><strong>YES</strong></td><td>set times to execute job</td></tr>
<tr><td>set_fields</td><td>object</td><td>NO</td><td>fields that can set hardcoded</td></tr>
<tr><td>action_name</td><td>string</td><td>NO</td><td>action to be go.</td></tr>
</tbody></table>
</div>
<h2 id="workflowstatejobtime-schema"><a class="header" href="#workflowstatejobtime-schema">WorkflowStateJobTime schema</a></h2>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>required</th><th>Description</th></tr></thead><tbody>
<tr><td>timestamp</td><td>number</td><td>NO</td><td>just used for 'static' type</td></tr>
<tr><td>day</td><td>number</td><td>NO</td><td>used for 'afterTime' type</td></tr>
<tr><td>weekday</td><td>number</td><td>NO</td><td>used for 'weekly' and 'static' type (range 1..7)</td></tr>
<tr><td>hour</td><td>number</td><td>NO</td><td>used for 'afterTime' and 'daily' and 'weekly' and 'static' type (range 1..24)</td></tr>
<tr><td>minute</td><td>number</td><td>NO</td><td>used for 'afterTime' and 'hourly' and 'daily' and 'weekly'  and 'static' type</td></tr>
<tr><td>second</td><td>number</td><td>NO</td><td>used for 'afterTime' and 'minutely' and 'hourly' and 'daily' and 'weekly' and 'static' type</td></tr>
</tbody></table>
</div>
<hr />
<p><sup class="footnote-reference"><a href="#alias_name_note">3</a></sup> added in 20220727.1</p>
<p><sup class="footnote-reference"><a href="#send_fields_note">2</a></sup> added in 20220727.2</p>
<p><sup class="footnote-reference"><a href="#state_job_note">1</a></sup> added in 20220810.1</p>
<p><sup class="footnote-reference"><a href="#hook_base_url_note">4</a></sup> added in 20220814.1</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="process"><a class="header" href="#process">Process</a></h1>
<p>A process is an instance of a deployed workflow. you can create new process like this:</p>
<pre><code class="language-bash">curl -X 'POST' \
  'http://localhost:8082/api/v1/workflow/create' \
  -H 'accept: application/json' \
  -H 'Content-Type: application/json' \
  -d '{
  &quot;name&quot;: &quot;sample_workflow&quot;,
  &quot;version&quot;: 1
}'
</code></pre>
<blockquote>
<p>if you do not specify workflow version, in default create process from with latest version of that workflow</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="schema-details-202207272-edition"><a class="header" href="#schema-details-202207272-edition">Schema details (20220727.2 edition)</a></h1>
<h2 id="main-schema-1"><a class="header" href="#main-schema-1">main schema</a></h2>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>required</th><th>Description</th></tr></thead><tbody>
<tr><td>_id</td><td>string</td><td><strong>YES</strong></td><td>id of process</td></tr>
<tr><td>workflow_name</td><td>string</td><td>NO</td><td>workflow name</td></tr>
<tr><td>workflow_version</td><td>number</td><td>NO</td><td>default is 1</td></tr>
<tr><td>current_state</td><td>string</td><td><strong>YES</strong></td><td>current state of process</td></tr>
<tr><td>field_values</td><td><a href="concepts/process/schema.html#workflowprocessfield-schema">WorkflowProcessField[]</a></td><td>NO</td><td>process fields that filled</td></tr>
<tr><td>history</td><td>WorkflowProcessHistoryModel[]</td><td><strong>YES</strong></td><td>all history of process change states</td></tr>
<tr><td>workflow</td><td>DeployedWorkflowModel</td><td><strong>YES</strong></td><td>workflow reference</td></tr>
<tr><td>created_at</td><td>number</td><td><strong>YES</strong></td><td>create process at date (timestamp)</td></tr>
<tr><td>created_by</td><td>number</td><td><strong>YES</strong></td><td>who create process</td></tr>
<tr><td>updated_at</td><td>number</td><td><strong>YES</strong></td><td>update process at date (timestamp)</td></tr>
</tbody></table>
</div>
<h2 id="workflowprocessfield-schema"><a class="header" href="#workflowprocessfield-schema">WorkflowProcessField schema</a></h2>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>required</th><th>Description</th></tr></thead><tbody>
<tr><td>name</td><td>string</td><td><strong>YES</strong></td><td>name of field</td></tr>
<tr><td>value</td><td>any</td><td><strong>YES</strong></td><td>value of field</td></tr>
<tr><td>meta</td><td>object</td><td>NO</td><td>meta data of field</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="access-roles"><a class="header" href="#access-roles">Access Roles</a></h1>
<p>every user that want to call one of the endpoint apis, must be authorized. and every user can have some roles. (just a label)</p>
<p>for example, a user can be <code>manager</code> and <code>normal_user</code> and <code>supporter</code> and these are just labels that save for every user.</p>
<h2 id="reserved-roles"><a class="header" href="#reserved-roles">reserved roles</a></h2>
<p>exist some reserved access roles:</p>
<h3 id="_all_"><a class="header" href="#_all_"><code>_all_</code></a></h3>
<p>means all authorized users have access.</p>
<p>default of all access roles on every where is <code>_all_</code>.</p>
<h3 id="_owner_"><a class="header" href="#_owner_"><code>_owner_</code></a></h3>
<p>means just owner of process has access</p>
<p>used in states and actions</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="state-event"><a class="header" href="#state-event">State Event</a></h1>
<p>every state of workflow, can have some events. you can see details of state action schema on <a href="concepts/./workflow/schema.html#workflowstateevent-schema">here</a></p>
<p>you can set <code>hook_url</code> url or <code>redis</code> channel to emit event on it.</p>
<h2 id="event-names"><a class="header" href="#event-names">event names</a></h2>
<h4 id="oninit-event"><a class="header" href="#oninit-event"><code>onInit</code> event</a></h4>
<p>when current state be this state</p>
<h4 id="onleave-event"><a class="header" href="#onleave-event"><code>onLeave</code> event</a></h4>
<p>when current state be left this state</p>
<h4 id="onjob-event"><a class="header" href="#onjob-event"><code>onJob</code> event</a></h4>
<p>when a job of current state executed (after a time)</p>
<h2 id="event-parameters"><a class="header" href="#event-parameters">event parameters</a></h2>
<p>in every events, sent these parameters:</p>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>Description</th></tr></thead><tbody>
<tr><td>process_id</td><td>string</td><td>current process id</td></tr>
<tr><td>state_name</td><td>string</td><td>state that raised event from it</td></tr>
<tr><td>fields</td><td>object</td><td>all field values of process</td></tr>
<tr><td>name</td><td>string</td><td>name of event</td></tr>
<tr><td>user_id</td><td>number</td><td>user relevant with event</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="state-job"><a class="header" href="#state-job">State Job</a></h1>
<p>every state can have some jobs that started after state executed. you can see details of state action schema on <a href="concepts/./workflow/schema.html#workflowstatejob-schema">here</a></p>
<p>after a job started, a worker created for it (that can killed by admin)</p>
<p>every job can schedule with <code>static</code> type or <code>weekly</code> or <code>daily</code> or <code>hourly</code> or <code>minutely</code> and some times like:</p>
<pre><code>&quot;jobs&quot;: [
    {
        &quot;type&quot;: &quot;daily&quot;,
        &quot;times&quot;: [
            {
                &quot;hour&quot;: 5,
            }
            {
                &quot;hour&quot;: 15,
                &quot;minute&quot;: 30,
            }
        ],
        &quot;set_fields&quot;: {&quot;my_field&quot;: 0}
    }
]
</code></pre>
<p>every day in <code>5:00</code> and <code>15:30</code>, <code>my_field</code> will be reset!</p>
<p>you can also another type named <code>afterTime</code>. this type execute job after a passed time. like 5 hours after current state started </p>
<pre><code>&quot;jobs&quot;: [
    {
        type: &quot;afterTime&quot;,
        times: [
            {
                hour: 5,
            }
        ],
        &quot;set_fields&quot;: {&quot;expired&quot;: true},
        &quot;action_name&quot;: &quot;expired_state&quot;

    }
]

</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="state-action"><a class="header" href="#state-action">State Action</a></h1>
<p>every state of workflow, has some actions or not! you can see details of state action schema on <a href="concepts/state_action/../workflow/schema.html#workflowstateaction-schema">here</a></p>
<p>every action can be one of these types for execute:</p>
<blockquote>
<p>you can use, <code>alias</code> for <code>hook_url</code>, <code>redis</code> types by <code>alias_name</code> property.</p>
</blockquote>
<h4 id="hook_url"><a class="header" href="#hook_url">hook_url</a></h4>
<p>when your server must be determine that next state is which or you can manage action execute by your self app server.</p>
<p>you can use <code>base_url</code> property and set your relative path in <code>url</code> property. (also you can set <code>base_url</code> with <code>alias</code>)</p>
<p>for this you need to set a endpoint url as <code>url</code>, and your accept request method like <code>get</code> or <code>post</code> (default is <code>post</code> method)</p>
<p>and you can set custom headers on hook request that raised by workflow engine like a authenticate token:</p>
<pre><code class="language-json">&quot;headers&quot;: {
    &quot;auth_token&quot;: &quot;workflow_engine_token&quot;
}
</code></pre>
<h4 id="redis"><a class="header" href="#redis">redis</a></h4>
<p>when you communicate with workflow engine by <strong>redis</strong>, you can use this way.</p>
<p>you must to set a channel name that subscribe on it in your app server.
and set a response channel name that publish on it your response (like next state) in your app server.</p>
<p>in default, workflow service use first redis instance that defined in configs, but you can use specify redis instance by <code>redis_instance</code> parameter.</p>
<blockquote>
<p><code>channel</code> and <code>response_channel</code> not be same!</p>
</blockquote>
<h4 id="local"><a class="header" href="#local">local</a></h4>
<p>if your action, can be execute locally, you can do this. you can just set your <code>next_state</code> name.</p>
<p>for example for reject actions, you can do this way.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="state-action-response"><a class="header" href="#state-action-response">State Action Response</a></h1>
<p>when you use <code>hook_url</code> or <code>redis</code> types for state action, your server receive an object that contains (send parameters):</p>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>Description</th></tr></thead><tbody>
<tr><td>state_name</td><td>string</td><td>state name</td></tr>
<tr><td>state_action_name</td><td>string</td><td>state action name</td></tr>
<tr><td>workflow_name</td><td>string</td><td>workflow name</td></tr>
<tr><td>workflow_version</td><td>number</td><td>workflow version</td></tr>
<tr><td>process_id</td><td>number</td><td>current process id</td></tr>
<tr><td>user_id</td><td>number</td><td>user that call this action</td></tr>
<tr><td>owner_id</td><td>number</td><td>user that create this process</td></tr>
<tr><td>message</td><td>string</td><td>message that user send on call this action</td></tr>
<tr><td>required_fields</td><td><a href="concepts/state_action/../process/schema.html#workflowprocessfield-schema">WorkflowProcessField[]</a></td><td>all required fields that user send them</td></tr>
<tr><td>optional_fields</td><td><a href="concepts/state_action/../process/schema.html#workflowprocessfield-schema">WorkflowProcessField[]</a></td><td>all optional fields that user send them</td></tr>
<tr><td>send_fields</td><td><a href="concepts/state_action/../process/schema.html#workflowprocessfield-schema">WorkflowProcessField[]</a></td><td>all fields that before set</td></tr>
</tbody></table>
</div>
<blockquote>
<p>in <code>hook_url</code> type, if no response or error response receive, then failed action.</p>
</blockquote>
<p>when you set state action as <code>hook_url</code> or <code>redis</code>, you must response to complete action:</p>
<h3 id="string-response"><a class="header" href="#string-response"><code>string</code> response</a></h3>
<p>you can send just next state as string</p>
<h3 id="object-response"><a class="header" href="#object-response"><code>object</code> response</a></h3>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>required</th><th>Description</th></tr></thead><tbody>
<tr><td>state_name</td><td>string</td><td><strong>YES</strong></td><td>the state that go on, if null, then failed state</td></tr>
<tr><td>response_message</td><td>string</td><td>NO</td><td>message of responsible server</td></tr>
<tr><td>fields</td><td>object</td><td>NO</td><td>update some fields of process</td></tr>
</tbody></table>
</div>
<blockquote>
<p>after a timeout (defined in <a href="concepts/state_action/../../configs/server.html">server</a> configs), if no receive any response, failed action.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="command-line-tool"><a class="header" href="#command-line-tool">Command Line Tool</a></h1>
<p>we use <a href="https://www.npmjs.com/package/dat-tool">dat-tool</a> tool for integrating a cli for project.</p>
<p>for use this tool, first need to clone it: </p>
<pre><code class="language-bash">
git clone https://github.com/workflow-engine-service/cli cli/

</code></pre>
<h2 id="install--use"><a class="header" href="#install--use">Install &amp; Use</a></h2>
<ul>
<li>install node 12 or higher version</li>
<li>install DAT by <code>npm install -g dat-tool</code></li>
<li>go to <code>cli</code> folder</li>
<li>type <code>npm install</code> to install node types</li>
<li>then, type <code>dat m </code>, if you want to develop script</li>
<li>And for use cli script, type <code>dat play</code> or just <code>dat p</code></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="the-new-command"><a class="header" href="#the-new-command">the new command</a></h1>
<blockquote>
<p><strong>just support <code>python3</code> language for now</strong></p>
</blockquote>
<p>for generate new workflow interfaces.
the <code>new</code> command is used like this</p>
<pre><code class="language-shell">dat p n -n sample_workflow
</code></pre>
<h2 id="most-used-parameters"><a class="header" href="#most-used-parameters">most used parameters:</a></h2>
<h3 id="name-n"><a class="header" href="#name-n">name (n)</a></h3>
<p>workflow name that need to create</p>
<h3 id="language-l"><a class="header" href="#language-l">language (l)</a></h3>
<p>language to generate interface files </p>
<p><strong>programming languages to support:</strong></p>
<ul>
<li>python3 (default)</li>
</ul>
<h3 id="version-v"><a class="header" href="#version-v">version (v)</a></h3>
<p>version of workflow (default : 1)</p>
<h3 id="output-o"><a class="header" href="#output-o">output (o)</a></h3>
<p>directory path for generate interface files</p>
<h3 id="overwrite-ow"><a class="header" href="#overwrite-ow">overwrite (ow)</a></h3>
<p>force to overwrite workflow interfaces, if exist</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="the-install-command"><a class="header" href="#the-install-command">the install command</a></h1>
<p>install workflow engine as dockerize.
the <code>install</code> command is used like this</p>
<pre><code class="language-shell">dat p i
</code></pre>
<h2 id="most-used-parameters-1"><a class="header" href="#most-used-parameters-1">most used parameters:</a></h2>
<h3 id="skip-remove-docker-cache-s1"><a class="header" href="#skip-remove-docker-cache-s1">skip-remove-docker-cache (s1)</a></h3>
<p>skip to remove docker unused images, containers</p>
<h3 id="skip-build-image-s2"><a class="header" href="#skip-build-image-s2">skip-build-image (s2)</a></h3>
<p>skip to build workflow image</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="configure"><a class="header" href="#configure">Configure</a></h1>
<p>for customize default configure, if you in development mode, must edit <code>configs.dev.json</code> and if in production mode, you need to edit <code>configs.prod.json</code> file in project root</p>
<blockquote>
<p><code>configs.prod.json</code> file not in git tracking and you should create it for self.</p>
</blockquote>
<p>configs json file includes some namespaces that some is required to set (for development mode) and some is optional. </p>
<blockquote>
<p>after update <code>configs.prod.json</code> file (in production mode), you should to reset workflow engine by command <code>dat p i</code> (<a href="configs/../cli/install_command.html">install command</a>)</p>
</blockquote>
<h2 id="config-namespaces"><a class="header" href="#config-namespaces">config namespaces</a></h2>
<ul>
<li><a href="configs/./redis.html">redis</a> (<em>optional</em>)</li>
<li><a href="configs/./mongo.html">mongo</a> (<strong>required</strong>)</li>
<li><a href="configs/./server.html">server</a> (<strong>required</strong>)</li>
<li><a href="configs/./admin_users.html">admin_users</a> (<strong>required</strong>)</li>
<li><a href="configs/./auth_user.html">auth_user</a> (<strong>required</strong>)</li>
<li><a href="configs/./docker.html">docker</a> (<em>optional</em>) (just for production)</li>
<li><a href="configs/./alias.md.html">alias</a> (<em>optional</em>)</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="redis-config-namespace"><a class="header" href="#redis-config-namespace"><code>redis</code> config namespace</a></h1>
<p>you can define some redis server connections used for redis type of state action</p>
<blockquote>
<p>if you not use any redis server, redis server in docker compose not be loaded! </p>
</blockquote>
<p>sample code:</p>
<pre><code class="language-json">&quot;redis&quot;: {
    &quot;redis1&quot;: {
        &quot;host&quot;: &quot;127.0.0.1&quot;,
        &quot;port&quot;: 6379
    }
},
</code></pre>
<p>for define redis connection, you declare a name for it (like redis1) and define redis properties on it.</p>
<h3 id="properties"><a class="header" href="#properties">properties</a></h3>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>required</th><th>Description</th></tr></thead><tbody>
<tr><td>host</td><td>string</td><td>Yes</td><td>host name of redis server</td></tr>
<tr><td>port</td><td>number</td><td>YES</td><td>-</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="mongo-config-namespace"><a class="header" href="#mongo-config-namespace"><code>mongo</code> config namespace</a></h1>
<p>you must define main database connection for workflow engine</p>
<p>sample code:</p>
<pre><code class="language-json">&quot;mongo&quot;: {
    &quot;host&quot;: &quot;127.0.0.1&quot;,
    &quot;port&quot;: 27017,
    &quot;name&quot;: &quot;workflow_db&quot;,
    &quot;timezone&quot;: &quot;Asia/Tehran&quot;
},
</code></pre>
<h3 id="properties-1"><a class="header" href="#properties-1">properties</a></h3>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>required</th><th>Description</th></tr></thead><tbody>
<tr><td>host</td><td>string</td><td>Yes</td><td>host name of mongo server</td></tr>
<tr><td>port</td><td>number</td><td>YES</td><td>-</td></tr>
<tr><td>name</td><td>string</td><td>YES</td><td>database name</td></tr>
<tr><td>username</td><td>string</td><td>NO</td><td>-</td></tr>
<tr><td>password</td><td>string</td><td>NO</td><td>-</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="server-config-namespace"><a class="header" href="#server-config-namespace"><code>server</code> config namespace</a></h1>
<p>you must define server configs like port or disable document services</p>
<p>sample code:</p>
<pre><code class="language-json">&quot;server&quot;: {
    &quot;port&quot;: 8082,
    &quot;host&quot;: &quot;0.0.0.0&quot;,
    &quot;logs_path&quot;: &quot;./logs&quot;,
    &quot;uploads_path&quot;: &quot;./uploads&quot;,
    &quot;debug_mode&quot;: false,
    &quot;swagger_disabled&quot;: true,
    &quot;wiki_disabled&quot;: true
},
</code></pre>
<h3 id="properties-2"><a class="header" href="#properties-2">properties</a></h3>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>required</th><th>Description</th></tr></thead><tbody>
<tr><td>port</td><td>number</td><td>YES</td><td>-</td></tr>
<tr><td>host</td><td>string</td><td>NO</td><td>host name of main server (default: <code>localhost</code>)</td></tr>
<tr><td>logs_path</td><td>string</td><td>NO</td><td>local logs folder path for store app logs (default: <code>./logs</code>)</td></tr>
<tr><td>uploads_path</td><td>string</td><td>NO</td><td>uploads folder path for store users upload files (default: <code>./uploads</code>)</td></tr>
<tr><td>debug_mode</td><td>boolean</td><td>NO</td><td>activate debug logs</td></tr>
<tr><td>wiki_base_url</td><td>string</td><td>NO</td><td>wiki service base url (default: <code>/wiki</code>) (<strong>deprecated</strong>)</td></tr>
<tr><td>wiki_disabled</td><td>boolean</td><td>NO</td><td>is wiki service disabled? (<strong>deprecated</strong>)</td></tr>
<tr><td>swagger_base_url</td><td>string</td><td>NO</td><td>swagger service base url (default: <code>/api-docs</code>)</td></tr>
<tr><td>swagger_disabled</td><td>boolean</td><td>NO</td><td>is swagger service disabled?</td></tr>
<tr><td>worker_timeout</td><td>number</td><td>NO</td><td>time for wait a worker to get response (default: 30s)</td></tr>
<tr><td>max_worker_running</td><td>number</td><td>NO</td><td>max workers to async running (default: 10)</td></tr>
<tr><td>frontend_path</td><td>string</td><td>NO</td><td>frontend file resources path for serve (if not, means that this service is disabled!)</td></tr>
<tr><td>frontend_assets_path</td><td>string</td><td>NO</td><td>frontend assets resources path for serve (if not, set <code>/assets</code>)</td></tr>
<tr><td>frontend_url</td><td>string</td><td>NO</td><td>frontend url (default: <code>/frontend</code>)</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="admin_users-config-namespace"><a class="header" href="#admin_users-config-namespace"><code>admin_users</code> config namespace</a></h1>
<p>you must at least one admin user to connect workflow service. set admin users on workflow engine as hard coded</p>
<blockquote>
<p>you can set custom role for your admin users</p>
</blockquote>
<p>sample code:</p>
<pre><code class="language-json">&quot;admin_users&quot;: [
    {
        &quot;username&quot;: &quot;admin&quot;,
        &quot;secretkey&quot;: &quot;admin&quot;,
        &quot;roles&quot;: [
            &quot;admin&quot;
        ]
    }
],
</code></pre>
<h3 id="properties-3"><a class="header" href="#properties-3">properties</a></h3>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>required</th><th>Description</th></tr></thead><tbody>
<tr><td>username</td><td>string</td><td>YES</td><td>-</td></tr>
<tr><td>secretkey</td><td>string</td><td>YES</td><td>recommend that admin secret key be very hard</td></tr>
<tr><td>roles</td><td>string[]</td><td>NO</td><td>you can set custom roles for your admin user (default: <code>[_admin_]</code>)</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="auth_user-config-namespace"><a class="header" href="#auth_user-config-namespace"><code>auth_user</code> config namespace</a></h1>
<p>you must define set authenticate configs</p>
<p>sample code:</p>
<pre><code class="language-json">&quot;auth_user&quot;: {
    &quot;type&quot;: &quot;directly&quot;,
    &quot;lifetime&quot;: 86400,
    &quot;param_name&quot;: &quot;access_token&quot;
},
</code></pre>
<h3 id="properties-4"><a class="header" href="#properties-4">properties</a></h3>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>required</th><th>Description</th></tr></thead><tbody>
<tr><td>type</td><td>string</td><td>YES</td><td>can be 'api_based' or 'directly' or 'dual'</td></tr>
<tr><td>lifetime</td><td>number</td><td>YES</td><td>in seconds</td></tr>
<tr><td>url</td><td>string</td><td>NO</td><td>for api_based type</td></tr>
<tr><td>method</td><td>string</td><td>NO</td><td>for api_based type (can be get or post or put)</td></tr>
<tr><td>param_name</td><td>string</td><td>NO</td><td>for api_based type (default: access_token)</td></tr>
<tr><td>header_name</td><td>string</td><td>NO</td><td>for authenticate user request (default: authentication)</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="docker-config-namespace"><a class="header" href="#docker-config-namespace"><code>docker</code> config namespace</a></h1>
<p>you can define docker configs</p>
<blockquote>
<p>this namespace used just for <strong>production</strong> mode</p>
</blockquote>
<p>sample code:</p>
<pre><code class="language-json">&quot;docker&quot;: {
    &quot;mongo_image&quot;: &quot;mongo&quot;,
    &quot;redis_image&quot;: &quot;redis&quot;
}
</code></pre>
<h3 id="properties-5"><a class="header" href="#properties-5">properties</a></h3>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>required</th><th>Description</th></tr></thead><tbody>
<tr><td>mongo_image</td><td>string</td><td>NO</td><td>docker image used for mongo service (you can use it with tag)</td></tr>
<tr><td>redis_image</td><td>string</td><td>NO</td><td>docker image used for redis service</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="alias-config-namespace"><a class="header" href="#alias-config-namespace"><code>alias</code> config namespace</a></h1>
<p>you can define some alias in different types like <code>hook_url</code>. and then use it on every where that accept this type with <code>alias_name</code> property.</p>
<p>sample code:</p>
<pre><code class="language-json">&quot;alias&quot;: {
    &quot;app_hook&quot;: {
        &quot;type&quot;: &quot;hook_url&quot;,
        &quot;url&quot;: &quot;http://app.com/hook&quot;,
        &quot;headers&quot;: {
            &quot;auth_token&quot;: &quot;436gbg45b4by54c45c4&quot;
        }
    },
    &quot;app_redis&quot;: {
        &quot;type&quot;: &quot;redis&quot;,
        &quot;channel&quot;: &quot;action&quot;,
        &quot;response_channel&quot;: &quot;res_action&quot;
    }
},
</code></pre>
<h3 id="properties-6"><a class="header" href="#properties-6">properties</a></h3>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>required</th><th>Description</th></tr></thead><tbody>
<tr><td>type</td><td>string</td><td>Yes</td><td><a href="configs/alias.html#types">type of alias</a></td></tr>
</tbody></table>
</div>
<h4 id="types"><a class="header" href="#types">types</a></h4>
<p>every type of alias has different properties</p>
<h5 id="hook_url-1"><a class="header" href="#hook_url-1"><code>hook_url</code></a></h5>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>required</th><th>Description</th></tr></thead><tbody>
<tr><td>url</td><td>string</td><td><strong>YES</strong></td><td>can be a url like <code>http://sample.com/hook</code>. used for 'hook_url' type</td></tr>
<tr><td>method</td><td>string</td><td>NO</td><td>can be a request method like 'get' or 'post'. used for 'hook_url' type</td></tr>
<tr><td>headers</td><td>string[]</td><td>NO</td><td>headers that can be set on hook request. used for 'hook_url' type</td></tr>
</tbody></table>
</div>
<h5 id="redis-1"><a class="header" href="#redis-1"><code>redis</code></a></h5>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>required</th><th>Description</th></tr></thead><tbody>
<tr><td>channel</td><td>string</td><td><strong>YES</strong></td><td>publish channel name. used for 'redis' type</td></tr>
<tr><td>response_channel</td><td>string</td><td><strong>YES</strong></td><td>subscribe channel name. used for 'redis' type</td></tr>
<tr><td>redis_instance</td><td>string</td><td>NO</td><td>a redis instance name. used for 'redis' type. (default is first instance defined on configs)</td></tr>
</tbody></table>
</div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
